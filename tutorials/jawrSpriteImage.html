<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-08-29 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160829" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - How to generate image sprites with Jawr</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/j-a-w-r/jawr-main-repo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-08-29
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.9
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                
      <li>
  
                          <a href="../migrationGitRepo.html" title="Github repository Migration Guide">
          <i class="none"></i>
        Github repository Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrSmartbundling.html" title="How to use Jawr smart bundling feature">
          <i class="none"></i>
        How to use Jawr smart bundling feature</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>How to generate Image sprites with Jawr</a>
          </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToSetJsEngine.html" title="How to set Javascript engine in Jawr">
          <i class="none"></i>
        How to set Javascript engine in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToEnablePerformanceLogging.html" title="How to set performance logging in Jawr">
          <i class="none"></i>
        How to set performance logging in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                
      <li>
  
                          <a href="../docs/sampleApplications.html" title="Sample applications">
          <i class="none"></i>
        Sample applications</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Project tools</li>
                              
      <li>
  
                          <a href="https://jawr.java.net/" class="externalLink" title="Project home">
          <i class="none"></i>
        Project home</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="Membership">
          <i class="none"></i>
        Membership</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/forums/discussion-forum" class="externalLink" title="Discussion forums">
          <i class="none"></i>
        Discussion forums</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/lists" class="externalLink" title="Mailing lists">
          <i class="none"></i>
        Mailing lists</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/downloads/directory/release" class="externalLink" title="Documents & files">
          <i class="none"></i>
        Documents & files</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/projects/jawr/sources" class="externalLink" title="Old Subversion Repository">
          <i class="none"></i>
        Old Subversion Repository</a>
            </li>
                
      <li>
  
                          <a href="http://java.net/jira/browse/JAWR" class="externalLink" title="Issue tracker">
          <i class="none"></i>
        Issue tracker</a>
            </li>
                              <li class="nav-header">Github repositories</li>
                              
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-main-repo" class="externalLink" title="Jawr main repository">
          <i class="none"></i>
        Jawr main repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-core" class="externalLink" title="Jawr core repository">
          <i class="none"></i>
        Jawr core repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-spring" class="externalLink" title="Jawr spring repository">
          <i class="none"></i>
        Jawr spring repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-wicket" class="externalLink" title="Jawr wicket repository">
          <i class="none"></i>
        Jawr wicket repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-grails" class="externalLink" title="Jawr grails repository">
          <i class="none"></i>
        Jawr grails repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr2.x" class="externalLink" title="Jawr dwr2.x repository">
          <i class="none"></i>
        Jawr dwr2.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr3.x" class="externalLink" title="Jawr dwr3.x repository">
          <i class="none"></i>
        Jawr dwr3.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-tools" class="externalLink" title="Jawr tools repository">
          <i class="none"></i>
        Jawr tools repository</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>How to generate image sprites with Jawr<a name="How_to_generate_image_sprites_with_Jawr"></a></h2>
<p>The goal of this tutorial is to explain how to set up Jawr to generate sprites for CSS images using smartsprites.<br />This feature is available since the version 3.2 of Jawr.<br />Smartsprites allows the user to create sprites for CSS images from annotations in the CSS files.</p>
<p>The reference documentation for <b>smartsprites</b>, containing the different annotations can be found on the <a class="externalLink" href="http://csssprites.org/">smartsprites</a> project site.&#xa0;</p>
<p>It is important to note that the sprite generation feature works only in production mode.<br />Jawr will not generate the referenced image sprites in the CSS files if you are in debug mode.</p>
<div class="section">
<h3>Requirements<a name="Requirements"></a></h3>
<p>Jawr requires at least the version <b>0.2.5</b> of smartsprites for the sprite generation feature.</p></div>
<div class="section">
<h3>How it works ?<a name="How_it_works_"></a></h3>
<p>Smartsprites is a tool, which helps the developer to generate sprites from special annotations in the CSS files. When the user enables the sprite generation feature, Jawr will first let smartsprites process all the CSS files available in the CSS bundles to generate the CSS sprites, and then it will process the CSS files to generate the bundles.</p></div>
<div class="section">
<h3>Set up Jawr in your project<a name="Set_up_Jawr_in_your_project"></a></h3>
<p>Please check the <a href="./quickstart.html">quickstart</a> tutorial for the instruction about Jawr installation in your project.<br />Then add the dependency to smartsprites in your project.</p>

<ul>
  
<li>For non maven project</li>
</ul>
<p>If you don&#x2019;t use maven, you can find <b>smartsprites</b> jar and the  libraries associated in the package file available in the <a class="externalLink" href="http://download.csssprites.org/">download  section</a> of smartsprites site.  From there, download the version 0.2.5 or greater. In the zip file,  you will find in the <i>lib</i> folder the <b>smartsprites</b> jar and the  jars used by smartsprites.</p>

<ul>
  
<li>For maven project</li>
</ul>
<p>If you&#x2019;re using maven, you must add in your dependencies, the  following section :</p>

<div class="source">
<pre>            &lt;dependency&gt;
                    &lt;groupId&gt;com.carrotsearch&lt;/groupId&gt;
                    &lt;artifactId&gt;smartsprites&lt;/artifactId&gt;
                    &lt;version&gt;0.2.12&lt;/version&gt;
            &lt;/dependency&gt;
</pre></div></div>
<div class="section">
<h3>Configure instances of the Jawr Servlet<a name="Configure_instances_of_the_Jawr_Servlet"></a></h3>
<p>You must configure Jawr to use the CSS and the image servlets.<br />Please check the <a href="./howToUseJawrToServeImage.html">tutorial</a> on how to setup jawr to serve images.</p></div>
<div class="section">
<h3>Jawr configuration file<a name="Jawr_configuration_file"></a></h3>
<p>Jawr uses a global preprocessor to generate the CSS sprites. To enable the sprite generation feature, you need to add the following property in your configuration file:</p>

<div class="source">
<pre>        jawr.css.bundle.factory.global.preprocessors=smartsprites
</pre></div>
<p>With this property set, when you start your application in production mode, jawr will generate the image sprite, and these image sprites will be referenced in the bundles.</p></div>
<div class="section">
<h3>Test the image sprite generation<a name="Test_the_image_sprite_generation"></a></h3>
<p>Create an <b>/img</b> directory at the root of your web application and copy 2 <b>png</b> images in it, and rename them as <b>img1.png</b> and <b>img2.png</b>.<br />Create an <b>/css</b> directory at the root of your web application and write a test CSS file named <b>test.css</b> and add the following content:</p>

<div class="source">
<pre>/** sprite: mysprite; sprite-image: url('../img/mysprite.png'); sprite-layout: vertical */ 

.style1 {
        background-image: url(&quot;../img/img1.png&quot;); /** sprite-ref: mysprite; */
        background-repeat: no-repeat;
}

.style2 {
        background-repeat: no-repeat;
        background-image: url(&quot;../img/img2.png&quot;); /** sprite-ref: mysprite; */ 
}
</pre></div>

<ul>
  
<li>Here is a brief explanation of the <b>smartsprites</b> directives used in that file:</li>
</ul>
<p>Sprite declaration:</p>

<div class="source">
<pre>            /** sprite: mysprite; sprite-image: url('../img/mysprite.png'); sprite-layout: vertical */
</pre></div>
<p>This first line defines a new <b>sprite</b> named <b>mysprite</b>, whose  the URL will be <b>/img/mysprite.png</b>. &#xa0; you must note that in this  example the sprite URL is given relatively to the CSS sprite in  which it&#x2019;s declared.</p>
<p>The argument <b>sprite-layout: vertical</b> defines that we use a  sprite with a vertical layout. So all the image will be  appended vertically.</p>
<p>Sprite reference:</p>

<div class="source">
<pre>            background-image: url(&quot;../img/img1.png&quot;); /** sprite-ref: mysprite; */
</pre></div>
<p>Here we define that the image <b>/img/img1.png</b> belongs to the  sprite <b>mysprite</b>.</p>
<p>Please check the <a class="externalLink" href="http://csssprites.org/">smartsprites documentation</a> for more  information about the available directives</p>
<p>Write a test JSP page, which has a reference to a bundle containing <b>test.css</b> and add the following content:</p>

<div class="source">
<pre>&lt;%@ taglib uri=&quot;http://jawr.net/tags&quot; prefix=&quot;jwr&quot; %&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
        &lt;!-- Reference to a bundle containing test.css --&gt;
        ...
&lt;/head&gt;
&lt;body&gt;
        ...
        &lt;div class=&quot;style1&quot;&gt;div content&lt;/div&gt;   
        &lt;div class=&quot;style2&quot;&gt;div content&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
<p>Deploy your application to a server and open the JSP you created. Check the content of the CSS bundle which contains <b>test.css</b>, you must find references to a new &#x201c;../img/mysprite.png&#x201d;, where you had before references to <b>img1.png</b> and <b>img2.png</b>.</p></div>
<div class="section">
<h3>Sprites for CSS created by generators<a name="Sprites_for_CSS_created_by_generators"></a></h3>
<p>You can define sprites in a CSS created by a generator. But there is one constraint, which is that you need to define the sprite URL with a <b>sprite</b> prefix, and the URL must be absolute. Don&#x2019;t use relative path like &#x2018;sprite:../../mysprite.png&#x2019;.</p>
<p>For generated CSS, the smartsprites directive must looks like</p>

<div class="source">
<pre>/** sprite: mysprite; sprite-image: url('sprite:/img/mysprite.png'); sprite-layout: vertical */ 
...
...
</pre></div></div>
<div class="section">
<h3>Page design issue after image sprite generation<a name="Page_design_issue_after_image_sprite_generation"></a></h3>
<p>It&#x2019;s possible that the design of your page may be altered after the use of sprite generation. This is an issue which can happen while using smartsprites. Please check the <a class="externalLink" href="http://csssprites.org/#faq">FAQ section</a> of smartsprites for more information.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2016.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
